if (window.$docsify) {
  window.location.reload();
}

var config = {
  list: [
    {
      title: "Final Fantasy",
      release_date: "1987-12-18",
      platform: ["Famicom"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3_(%E6%B8%B8%E6%88%8F)",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/5/53/Final_Fantasy_Famicom_Boxart.jpg",
      play: "https://zaixianwan.app/games/1352",
    },
    {
      title: "Final Fantasy II",
      release_date: "1988-12-17",
      platform: ["Famicom"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3II",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/6/6e/%E6%9C%80%E7%B5%82%E5%B9%BB%E6%83%B3II.Logo.jpg",
      play: "https://zaixianwan.app/games/1353",
    },
    {
      title: "Final Fantasy III",
      release_date: "1990-04-27",
      platform: ["Famicom"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3III",
      cover: "https://upload.wikimedia.org/wikipedia/zh/8/86/Ff3cover.jpg",
      play: "https://zaixianwan.app/games/1355",
    },
    {
      title: "Final Fantasy IV",
      release_date: "1991-07-19",
      platform: ["Super Famicom"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%B5%82%E5%B9%BB%E6%83%B3IV",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/9/90/Final_Fantasy_IV.jpg",
      play: "https://zaixianwan.app/games/1357",
    },
    {
      title: "Final Fantasy V",
      release_date: "1992-12-06",
      platform: ["Super Famicom"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3V",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/0/00/Final_Fantasy_V_Box_JAP.jpg",
      play: "https://zaixianwan.app/games/1875",
    },
    {
      title: "Final Fantasy VI",
      release_date: "1994-04-02",
      platform: ["Super Famicom"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3VI",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/b/bb/Final_Fantasy_VI_Japanese_box.png",
      play: "https://zaixianwan.app/games/1878",
    },
    {
      title: "Final Fantasy VII",
      release_date: "1997-01-31",
      platform: ["PS"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3VII",
      cover: "https://upload.wikimedia.org/wikipedia/zh/2/29/FFVII.jpg",
      play: "https://zaixianwan.app/games/1358",
    },
    {
      title: "Final Fantasy VIII",
      release_date: "1999-02-11",
      platform: ["PS"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3VIII",
      cover: "https://upload.wikimedia.org/wikipedia/zh/c/c4/FF_VIII.jpg",
    },
    {
      title: "Final Fantasy IX",
      release_date: "2000-07-07",
      platform: ["PS"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3IX",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/3/30/Final_Fantasy_IX_Cover.jpg",
    },
    {
      title: "Final Fantasy X",
      release_date: "2001-07-19",
      platform: ["PS2"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3X",
      cover: "https://upload.wikimedia.org/wikipedia/zh/b/b8/FF_X.jpg",
      play: "https://threads.zaixianwan.app/games/3060",
    },
    {
      title: "Final Fantasy XI",
      release_date: "2002-05-16",
      platform: ["PS2", "PC"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3XI",
      cover: "https://upload.wikimedia.org/wikipedia/zh/8/8c/FF_XI.jpg",
    },
    {
      title: "Final Fantasy X-2",
      release_date: "2003-03-13",
      platform: ["PS2"],
    },
    {
      title: "Final Fantasy XII",
      release_date: "2006-03-16",
      platform: ["PS2"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3XII",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/b/b1/Final_Fantasy_XII_Logo.jpg",
      play: "https://threads.zaixianwan.app/games/3059",
    },
    {
      title: "Final Fantasy XIII",
      release_date: "2009-12-17",
      platform: ["PS3", "Xbox 360"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3XIII",
      cover: "https://upload.wikimedia.org/wikipedia/zh/7/7c/FF_XIII.jpg",
    },
    {
      title: "Final Fantasy XIV",
      release_date: "2010-09-30",
      platform: ["PC"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3XIV",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/8/8a/Final_Fantasy_XIV_A_REALM_REBORN_PS3_Cover.jpg",
    },
    {
      title: "Final Fantasy XV",
      release_date: "2016-11-29",
      platform: ["PS4", "Xbox One"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%B5%82%E5%B9%BB%E6%83%B3XV",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/c/c7/Final_Fantasy_XV.jpg",
    },
    {
      title: "Final Fantasy VII Remake",
      release_date: "2020-04-10",
      platform: ["PS4"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B3VII_%E9%87%8D%E5%88%B6%E7%89%88",
      cover: "https://upload.wikimedia.org/wikipedia/zh/4/46/FFVIIRemake.jpg",
    },
    {
      title: "Final Fantasy XVI",
      release_date: "2023-06-22",
      platform: ["PS5"],
      wiki: "https://zh.wikipedia.org/wiki/%E6%9C%80%E7%BB%88%E5%B9%BB%E6%83%B316",
      cover: "https://upload.wikimedia.org/wikipedia/zh/6/6c/FF_XVI_cover.png",
    },
    {
      title: "Final Fantasy VII Rebirth",
      release_date: "2024-02-29",
      platform: ["PS5"],
      wiki: "https://zh.wikipedia.org/wiki/Final_Fantasy_VII_%E9%87%8D%E7%94%9F",
      cover:
        "https://upload.wikimedia.org/wikipedia/zh/2/26/FINAL_FANTASY_VII_REBIRTH.jpg",
    },
  ],
};

function openURL(url) {
  window.open(url, "_blank");
}

function generateTR(list = []) {
  if (list.length === 0) return;

  const gameConsoleConfig = window._gameConsoleConfig;

  let tr = "";

  for (let i = 0; i < list.length; i++) {
    const obj = list[i];
    let displayName = `<a href="${obj.wiki}"><div>${obj.title}</div></a>`;
    let displayPlay = obj.play
      ? `<button class="button" onclick="openURL('${obj.play}')"><span>PLAY</span></button>`
      : "";

    let consoleObj = gameConsoleConfig.consoles.find(
      (c) => c.id === obj.platform[0]
    );
    const consoleName = consoleObj ? "首發平台: " + consoleObj.id : "";
    let displayConsole = consoleObj
      ? `<a href="${consoleObj.wiki}"><div>${consoleName}</div></a>`
      : ``;

    const td = `
                <td class="company">
                  ${displayName}
                  <div class="tooltip">
                    ${obj.title}
                    <img src="${obj.cover ? obj.cover : ""}">
                  </div>
                </td>
                <td class="console">
                  ${displayConsole}
                  <div class="tooltip">
                    ${consoleName}
                    <img src="${consoleObj ? consoleObj.cover : ""}">
                  </div>
                </td>
                <td class="emulator">${displayPlay}</td>`;

    const date = obj.release_date;

    tr += `<tr>
            <th class="actived" rowspan="1">${date}</th>
            ${td}
          </tr>`;
  }

  return tr;
}

var table = document.createElement("table");
var caption = document.createElement("caption");
var tbody = document.createElement("tbody");

caption.innerText = `最终幻想系列`;
table.classList.add("release-timeline");
table.classList.add("wikitable");
table.appendChild(caption);
table.appendChild(tbody);

document.body.appendChild(table);

config.list.sort((a, b) => parseInt(a.release_date) - parseInt(b.release_date));

tbody.innerHTML += generateTR(config.list);
